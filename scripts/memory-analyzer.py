#!/usr/bin/env python

import pickle 
import copy

modulenames = ["mod_anchordb", "mod_api", "mod_cdm", "mod_cdmclt", "mod_cdmi", 
"mod_charconv", "mod_client", "mod_cm", "mod_common", "mod_crawler", 
"mod_did", "mod_docapi", "mod_docattr", "mod_document_database", "mod_dummy", 
"mod_filter", "mod_htmlfilter", "mod_http_client", "mod_httpd", "mod_httpd_softbot", 
"mod_httpd_xmlrpc", "mod_httpd_xmlrpc_methods", "mod_icrawler", "mod_index_word_extractor", 
"mod_indexer", "mod_internet", "mod_lexicon", "mod_morpheme", "mod_mp", 
"mod_oldlexicon", "mod_pagerank", "mod_protocol4", "mod_qp", "mod_qpp", 
"mod_qrm", "mod_sbcdm_tcp", "mod_sbclient", "mod_sbhandler", "mod_sbheadquarter", 
"mod_sbmanager", "mod_server", "mod_siteinfo", "mod_so", "mod_sock", 
"mod_softbot4", "mod_spamfilter", "mod_spool", "mod_supreme_court", "mod_tcp", 
"mod_tests", "mod_tokenizer", "mod_udp", "mod_url_repository", "mod_vbm", 
"mod_vrf", "mod_vrfi", "mod_xmlparser", "mod_xqpp", "server", "etc"]

pickled = '''\
(dp0
S'mod_cdm_cdmiwrap.c'
p1
S'mod_cdm'
p2
sS'mak_data.h'
p3
S'mod_morpheme'
p4
sS'wp_stack.c'
p5
S'mod_htmlfilter'
p6
sS'parser.h'
p7
S'mod_xmlparser'
p8
sS'log.h'
p9
S'mod_httpd'
p10
sS'mprintf.c'
p11
S'mod_http_client'
p12
sS'mak_data.c'
p13
g4
sS'ds.h'
p14
S'mod_icrawler'
p15
sS'mprintf.h'
p16
g12
sS'log.c'
p17
g10
sS'mod_remote_morpheme.c'
p18
g4
sS'parser.c'
p19
g8
sS'shm_mirror_buffer_inlines.h'
p20
g6
sS'mod_server.2.c'
p21
S'mod_server'
p22
sS'multiplexor_source.c'
p23
g6
sS'vrf.h'
p24
S'mod_vrfi'
p25
sS'HanTagAPI.h'
p26
S'mod_index_word_extractor'
p27
sS'mod_qp_test.c'
p28
S'mod_qp'
p29
sS'parseDoc.c'
p30
g2
sS'qpp_test.c'
p31
S'mod_qpp'
p32
sS'hq_client.c'
p33
S'mod_sbclient'
p34
sS'testpackagereader.c'
p35
S'mod_anchordb'
p36
sS'vrf.c'
p37
g25
sS'mod_urlrep_handler.c'
p38
S'mod_sbhandler'
p39
sS'lb_lex.c'
p40
g4
sS'session.c'
p41
g15
sS'mod_dummy.c'
p42
S'mod_dummy'
p43
sS'mod_lexicon.h'
p44
S'mod_lexicon'
p45
sS'rwlock.h'
p46
S'mod_cdmi'
p47
sS'mod_dummy_lexicon.c'
p48
g45
sS'tokenizer_test.c'
p49
g32
sS'ma_eng.c'
p50
g4
sS'sf_Core.c'
p51
S'mod_spamfilter'
p52
sS'mod_internet_common.c'
p53
S'mod_internet'
p54
sS'hashtable.h'
p55
S'mod_common'
p56
sS'indexHandle.c'
p57
g2
sS'hashtable.c'
p58
g56
sS'checksum.h'
p59
g8
sS'mod_sbhandler.c'
p60
g39
sS'mod_rmac.c'
p61
g27
sS'charconv.h'
p62
S'mod_api'
p63
sS'http_filter.c'
p64
g10
sS'shm_urldb.c'
p65
S'mod_crawler'
p66
sS'hcc98_codetable.h'
p67
g27
sS'default_filter.c'
p68
g6
sS'sbhandler.h'
p69
g63
sS'connection.h'
p70
g10
sS'charconv.c'
p71
g63
sS'sbmanager.h'
p72
g63
sS'sbhandler.c'
p73
g63
sS'default_filter.h'
p74
S'mod_filter'
p75
sS'ma_gl.h'
p76
g4
sS'mod_registry_test.c'
p77
S'mod_tests'
p78
sS'http.c'
p79
g12
sS'mod_bigram_truncation_search_support.c'
p80
g27
sS'request.h'
p81
g10
sS'url.c'
p82
g66
sS'qpp_test.h'
p83
g32
sS'mod_docattr_supreme_regulation.h'
p84
S'mod_supreme_court'
p85
sS'request.c'
p86
g10
sS'http.h'
p87
g12
sS'lexicon_index_berkeley_db.c'
p88
g45
sS'mod_agentnode_control.c'
p89
S'mod_sbheadquarter'
p90
sS'url.h'
p91
g66
sS'url_repository.c'
p92
g63
sS'QRM_eng.c'
p93
S'mod_qrm'
p94
sS'ma_code.c'
p95
g94
sS'testparser.c'
p96
g8
sS'tempstore.h'
p97
g36
sS'mod_docattr_supreme_precedent.h'
p98
g85
sS'mod_srchnode_control.c'
p99
g90
sS'koma_test.c'
p100
g27
sS'url_repository.h'
p101
g63
sS'tempstore.c'
p102
g36
sS'mod_docattr_supreme_literature.h'
p103
g85
sS'mod_urlrep_client.c'
p104
g34
sS'QRM_eng.h'
p105
g94
sS'docattr_new.h'
p106
g63
sS'transfer.c'
p107
g66
sS'lexicon.c'
p108
g63
sS'internet.h'
p109
g54
sS'mod_server.h'
p110
g22
sS'mod_docattr_type1.c'
p111
S'mod_docattr'
p112
sS'lexicon.h'
p113
g63
sS'docattr_new.c'
p114
g63
sS'mod_docattr_type1.h'
p115
g112
sS'mod_lexicon.c'
p116
g45
sS'mod_httpclient.c'
p117
g12
sS'cdm.c'
p118
g63
sS'docabstract.h'
p119
g63
sS'mod_docattr_supreme_precedent.c'
p120
g85
sS'qp.h'
p121
g63
sS'mod_udp.c'
p122
S'mod_udp'
p123
sS'internet_constants.h'
p124
g54
sS'mod_httpclient.h'
p125
g12
sS'mod_udp.h'
p126
g123
sS'qp.c'
p127
g63
sS'hcc98.h'
p128
g27
sS'simpletree.h'
p129
g8
sS'cleansing_filter.c'
p130
g6
sS'util_filter.h'
p131
g10
sS'mclient.c'
p132
g66
sS'cleansing_filter.h'
p133
g6
sS'KomaResult.h'
p134
g27
sS'mod_crawler_handler.c'
p135
g39
sS'mod_qp.h'
p136
g29
sS'util_filter.c'
p137
g10
sS'sbhq_agentnode_control.c'
p138
g39
sS'mod_indexer_test.c'
p139
S'mod_indexer'
p140
sS'lexicon_index_truncation.c'
p141
g45
sS'testspool.c'
p142
S'mod_spool'
p143
sS'wp_parser.h'
p144
g6
sS'mod_koma.h'
p145
g27
sS'shm_clean.c'
p146
g66
sS'mod_httpd_softbot_agent.c'
p147
S'mod_httpd_softbot'
p148
sS'mod_qp.c'
p149
g29
sS'wp_parser.c'
p150
g6
sS'databasket.c'
p151
g140
sS'ma_hd.h'
p152
g4
sS'html.h'
p153
g15
sS'mod_cdm.h'
p154
g2
sS'sbhq_srchnode_control.c'
p155
g39
sS'ma_jamo.h'
p156
g94
sS'mod_url_repository.c'
p157
S'mod_url_repository'
p158
sS'mod_cdm.c'
p159
g2
sS'mod_rms.c'
p160
g4
sS'mod_url_repository.h'
p161
g158
sS'mod_siteinfo.h'
p162
S'mod_siteinfo'
p163
sS'mod_anchornode_control.c'
p164
g90
sS'mod_sbheadquarter.h'
p165
g90
sS'mod_kor2chn_translator.c'
p166
g27
sS'mod_koma.c'
p167
g27
sS'lb_std.h'
p168
g4
sS'QRM_dict.c'
p169
g94
sS'ma_kor.h'
p170
g4
sS'mod_sbheadquarter.c'
p171
g90
sS'softbot4.c'
p172
g63
sS'ma_data.c'
p173
g4
sS'mod_oldlexicon.h'
p174
S'mod_oldlexicon'
p175
sS'mirror_buffer.h'
p176
g6
sS'dh.c'
p177
g8
sS'softbot4.h'
p178
g63
sS'ma_data.h'
p179
g4
sS'sbhq_node.c'
p180
g90
sS'mod_dummynode_control.c'
p181
g90
sS'crawler.h'
p182
g66
sS'mod_docapi_expat_temp.c'
p183
S'mod_docapi'
p184
sS'shm_domaindb.c'
p185
g66
sS'isam.h'
p186
S'mod_pagerank'
p187
sS'databasket.h'
p188
g140
sS'memory_sink.h'
p189
g6
sS'stack_test.h'
p190
g32
sS'mod_did_message.h'
p191
S'mod_did'
p192
sS'http_common.h'
p193
g66
sS'isam.c'
p194
g187
sS'html_filter.h'
p195
g6
sS'html_filter.c'
p196
g6
sS'htmlparse.c'
p197
g15
sS'bigram_test.c'
p198
g4
sS'mabi_kor.c'
p199
g4
sS'mod_signal_accepter.c'
p200
g36
sS'tagging.c'
p201
g4
sS'mod_dummy_manager.c'
p202
S'mod_sbmanager'
p203
sS'mod_siteinfo_handler.c'
p204
g39
sS'sbhq_urlrepnode_control.c'
p205
g39
sS'http_client.h'
p206
g63
sS'http_client.c'
p207
g63
sS'mod_softbot4.h'
p208
S'mod_softbot4'
p209
sS'xmlnode.h'
p210
g56
sS'SBLexMutex.c'
p211
g175
sS'mod_docapi_expat.c'
p212
g184
sS'xmlrpc_echo.c'
p213
S'mod_httpd_xmlrpc_methods'
p214
sS'xmlnode.c'
p215
g56
sS'mod_documentdb_client.c'
p216
g34
sS'mod_vbm_test.c'
p217
S'mod_vbm'
p218
sS'testregister.c'
p219
g47
sS'xmlrpc_echo.h'
p220
g214
sS'sbmanager.c'
p221
g63
sS'mod_rmas.c'
p222
g27
sS'ma.c'
p223
g4
sS'mk_dic.c'
p224
g4
sS'config.c'
p225
g10
sS'dbStat.h'
p226
S'mod_vrf'
p227
sS'core.h'
p228
g27
sS'mod_spool.c'
p229
g143
sS'mk_dic.h'
p230
g4
sS'http_core.h'
p231
g10
sS'dbStat.c'
p232
g227
sS'pagerank.h'
p233
g187
sS'http_core.c'
p234
g10
sS'mod_docattr.h'
p235
g112
sS'mod_charconv.c'
p236
S'mod_charconv'
p237
sS'mod_dummy_ma.c'
p238
g27
sS'mod_docattr.c'
p239
g112
sS'mod_docapi.h'
p240
g184
sS'mod_charconv.h'
p241
g237
sS'test_parser.c'
p242
g6
sS'postype.h'
p243
g27
sS'fd_source.c'
p244
g6
sS'nodedb.c'
p245
g90
sS'anchordb.h'
p246
g36
sS'node_status.c'
p247
g90
sS'fd_source.h'
p248
g6
sS'lb_std.c'
p249
g4
sS'testsampleparser.c'
p250
g75
sS'anchordb.c'
p251
g36
sS'nodedb.h'
p252
g90
sS'mod_spooled_indexer.c'
p253
g140
sS'mod_bigram_truncation_search_support.h'
p254
g27
sS'msg_record.c'
p255
g56
sS'mod_anchor_package_reader.c'
p256
g36
sS'docapi_filter.c'
p257
g6
sS'mod_client.h'
p258
S'mod_client'
p259
sS'msg_record.h'
p260
g56
sS'lexicon_index_dynamic_hash.c'
p261
g45
sS'mod_spooled_indexer.h'
p262
g140
sS'mod_client.c'
p263
g259
sS'mod_docapi_libxml.c'
p264
g184
sS'mod_anchor_package_reader.h'
p265
g36
sS'util_cfgtree.h'
p266
g10
sS'pagerankadmin.h'
p267
g187
sS'test_common.c'
p268
g56
sS'html_parser.c'
p269
g75
sS'document_database.h'
p270
g63
sS'mod_vrf.c'
p271
g227
sS'pagerankadmin.c'
p272
g63
sS'util_cfgtree.c'
p273
g10
sS'document_database.c'
p274
g63
sS'header_reader.c'
p275
g25
sS'html_parser.h'
p276
g75
sS'html_filter_new.c'
p277
g75
sS'test_httpclient.c'
p278
g12
sS'hit.h'
p279
g140
sS'ma_pos.h'
p280
g4
sS'mod_indexer_test.h'
p281
g140
sS'test_ipc_msg2.c'
p282
g78
sS'ma_eng.h'
p283
g4
sS'testreadcdmi.c'
p284
g47
sS'mod_spamfilter.c'
p285
g52
sS'mod_softbot4.c'
p286
g209
sS'httpclient_status.h'
p287
g12
sS'header_handle.h'
p288
g25
sS'QRM_extract_better_word.c'
p289
g94
sS'cannedDocServer.h'
p290
g2
sS'tokenizer_test.h'
p291
g32
sS'relatedTerm.h'
p292
g32
sS'QRM_extract_better_word.h'
p293
g94
sS'sf_DB.c'
p294
g52
sS'did_daemon.h'
p295
g63
sS'stack.c'
p296
g8
sS'koma_global.h'
p297
g27
sS'ma_kssm.h'
p298
g94
sS'ph.h'
p299
g27
sS'tcp.c'
p300
g63
sS'setpagerankdbinfo.c'
p301
g187
sS'mod_metadummy2.c'
p302
g43
sS'pagerankcalc.c'
p303
g187
sS'tcp.h'
p304
g63
sS'commonlib.c'
p305
g66
sS'mod_anchortext_update.c'
p306
g47
sS'mod_morpheme_test.c'
p307
g78
sS'mod_tcp.c'
p308
S'mod_tcp'
p309
sS'teststack.c'
p310
g8
sS'normalize_filter.h'
p311
g6
sS'checksum.c'
p312
g8
sS'debug.h'
p313
g66
sS'sbuffer.c'
p314
g66
sS'normalize_filter.c'
p315
g6
sS'QRM_dict.h'
p316
g94
sS'mod_signal_test.c'
p317
g78
sS'mod_qp_literature.c'
p318
g85
sS'mod_anchor_handler.c'
p319
g36
sS'sbuffer.h'
p320
g66
sS'httpbuffering.h'
p321
g12
sS'httpbuffering.c'
p322
g12
sS'mod_anchor_handler.h'
p323
g36
sS'anchor_client.c'
p324
g63
sS'test_icrawler.c'
p325
g15
sS'sbhq_ipcache.c'
p326
g90
sS'memory_source.c'
p327
g6
sS'testmpool.c'
p328
g143
sS'mabi.c'
p329
g4
sS'mod_agent_client.c'
p330
g34
sS'mod_bigram.h'
p331
g4
sS'predict.h'
p332
g27
sS'mabi.h'
p333
g4
sS'arraymmap.h'
p334
g187
sS'testcdmi.c'
p335
g47
sS'mod_httpd_xmlrpc.c'
p336
S'mod_httpd_xmlrpc'
p337
sS'sf_Main.c'
p338
g52
sS'mod_qp_precedent.c'
p339
g85
sS'QRM_kor.h'
p340
g94
sS'mod_siteinfo_client.c'
p341
g34
sS'sf_Main.h'
p342
g52
sS'did_daemon.c'
p343
g63
sS'mod_httpd_xmlrpc.h'
p344
g337
sS'agentdb.c'
p345
g90
sS'mod_sbhandler.h'
p346
g39
sS'FST.h'
p347
g27
sS'lb_lex.h'
p348
g4
sS'syncManager.h'
p349
g2
sS'test_char.h'
p350
g10
sS'mod_did_wrap_client.c'
p351
g192
sS'dh.h'
p352
g8
sS'anchor_client.h'
p353
g63
sS'KomaAPI.h'
p354
g27
sS'spool.h'
p355
g63
sS'ma.h'
p356
g4
sS'mod_vrf_test.c'
p357
g227
sS'xmlrpc_apache.h'
p358
g337
sS'spool.c'
p359
g63
sS'QRM_common.c'
p360
g94
sS'xmlrpc_apache.c'
p361
g337
sS'old_softbot.h'
p362
g94
sS'cdmi.h'
p363
g47
sS'sbclient.h'
p364
g63
sS'udp.c'
p365
g63
sS'udp.h'
p366
g63
sS'xmldef.h'
p367
g56
sS'simpletree.c'
p368
g8
sS'domain.h'
p369
g66
sS'sbclient.c'
p370
g63
sS'cdmi.c'
p371
g47
sS'defaulthandle.c'
p372
g187
sS'test_ipc_msg1.c'
p373
g78
sS'TaggerRsc.h'
p374
g27
sS'mod_index_each_spooled_doc.h'
p375
g140
sS'protocol.h'
p376
g10
sS'mod_httpd.c'
p377
g10
sS'sb.c'
p378
g6
sS'mod_docattr_supreme_literature.c'
p379
g85
sS'protocol.c'
p380
g10
sS'mod_index_each_spooled_doc.c'
p381
g140
sS'urldb.h'
p382
g66
sS'test_isam.c'
p383
g187
sS'sb.h'
p384
g6
sS'mod_httpd_test_handler.c'
p385
g10
sS'common_handler.c'
p386
g39
sS'data_handle.h'
p387
g25
sS'mod_cm.h'
p388
g66
sS'mod_icrawler.h'
p389
g15
sS'mod_register.c'
p390
g47
sS'httpclient_tcp.c'
p391
g12
sS'mod_icrawler.c'
p392
g15
sS'mod_cm.c'
p393
g66
sS'httpclient_tcp.h'
p394
g12
sS'test_memory.c'
p395
g78
sS'sbmgr_args.c'
p396
g203
sS'mod_xmlparser.c'
p397
g8
sS'mod_mp.c'
p398
S'mod_mp'
p399
sS'keymaker.h'
p400
g187
sS'mod_anchor_manager.c'
p401
g36
sS'did.h'
p402
g63
sS'mod_mp.h'
p403
g399
sS'rw_lock.c'
p404
g175
sS'mod_indexer_client.c'
p405
g34
sS'common_client.c'
p406
g34
sS'keymaker.c'
p407
g187
sS'doc_handler.c'
p408
g66
sS'http_util.h'
p409
g10
sS'mod_docattr_new.c'
p410
g112
sS'mod_cdmi.c'
p411
g47
sS'siteinfo.c'
p412
g63
sS'mod_vbm.h'
p413
g218
sS'http_util.c'
p414
g10
sS'test_xmlipc_msg.c'
p415
g78
sS'siteinfo.h'
p416
g63
sS'arraymmap.c'
p417
g187
sS'connect_nonb.c'
p418
g12
sS'morpheme.h'
p419
g63
sS'xmlrpc_method1.c'
p420
g214
sS'mod_crawler.c'
p421
g66
sS'oldlexicon.c'
p422
g63
sS'xmlrpc_method1.h'
p423
g214
sS'morpheme.c'
p424
g63
sS'mod_srchnode_client.c'
p425
g34
sS'connect_nonb.h'
p426
g12
sS'oldlexicon.h'
p427
g63
sS'mod_crawler.h'
p428
g66
sS'multiplexor_file.c'
p429
g6
sS'test_keygen.c'
p430
g187
sS'http_config.c'
p431
g10
sS'stack.h'
p432
g8
sS'xmlparser.h'
p433
g63
sS'lhash.c'
p434
g36
sS'mod_urlrepnode_control.c'
p435
g90
sS'mod_qrm.c'
p436
g94
sS'http_config.h'
p437
g10
sS'dbInfo.c'
p438
g227
sS'multiplexor_file.h'
p439
g6
sS'mod_httpd.h'
p440
g10
sS'lhash.h'
p441
g36
sS'xmlparser.c'
p442
g63
sS'mod_qp_statute.c'
p443
g85
sS'mod_spooling_doc.c'
p444
g140
sS'db_common.h'
p445
g90
sS'sbhq_di.c'
p446
g90
sS'register.c'
p447
g63
sS'getdate.c'
p448
g12
sS'mod_spooling_doc.h'
p449
g140
sS'testdh.c'
p450
g8
sS'getdate.h'
p451
g12
sS'sitetable.c'
p452
g15
sS'db_common.c'
p453
g90
sS'filter.c'
p454
g10
sS'mod_docattr_type2.c'
p455
g112
sS'mod_morpheme.h'
p456
g4
sS'mod_sbclient.h'
p457
g34
sS'mod_vrfi.h'
p458
g25
sS'mod_docattr_supreme_statute.h'
p459
g85
sS'mod_anchor_update.c'
p460
g36
sS'mod_agent_handler.c'
p461
g39
sS'filter.h'
p462
g10
sS'mod_vrfi.c'
p463
g25
sS'mod_sbclient.c'
p464
g34
sS'mod_morpheme.c'
p465
g4
sS'conv_chn.h'
p466
g27
sS'ds.c'
p467
g15
sS'mirror_buffer_filter.c'
p468
g6
sS'mod_oldlexicon_core.c'
p469
g175
sS'did_client.c'
p470
g63
sS'mod_docattr_internet.h'
p471
g54
sS'test_urlrep.c'
p472
g158
sS'mod_tokenizer.h'
p473
S'mod_tokenizer'
p474
sS'mod_process_control.c'
p475
g39
sS'conftable.c'
p476
g15
sS'did_client.h'
p477
g63
sS'didb.c'
p478
g90
sS'htmlextract.c'
p479
g15
sS'mod_anchor_arranger.c'
p480
g36
sS'mpool.h'
p481
g143
sS'tokenizer.h'
p482
g32
sS'mod_did.h'
p483
g192
sS'mod_siteinfo.c'
p484
g163
sS'tokenizer.c'
p485
g32
sS'mpool.c'
p486
g143
sS'documentobjecthandler.c'
p487
S'mod_document_database'
p488
sS'node_status_back.c'
p489
g90
sS'documentobjecthandler.h'
p490
g488
sS'syncManager.c'
p491
g2
sS'mod_koma_complex_noun_support.c'
p492
g27
sS'mod_koma_complex_noun_support.h'
p493
g27
sS'mod_sbhq_handler.c'
p494
g39
sS'data_handle.c'
p495
g25
sS'rwlock.c'
p496
g47
sS'QRM_mod.h'
p497
g94
sS'core.c'
p498
g10
sS'testspoolandcdmi.c'
p499
g47
sS'QRM_mod.c'
p500
g94
sS'test_siteinfo.c'
p501
g163
sS'testdocapicdmi.c'
p502
g184
sS'pool.h'
p503
g56
sS'mabi_kor.h'
p504
g4
sS'mod_docattr_internet.c'
p505
g54
sS'mod_sbmanager.c'
p506
g203
sS'mod_httpd_softbot_handler.c'
p507
g148
sS'mod_httpd_test_handler.h'
p508
g10
sS'hash.c'
p509
g66
sS'mod_httpd_softbot_handler.h'
p510
g148
sS'mod_tokenizer.c'
p511
g474
sS'mod_docattr_supreme_regulation.c'
p512
g85
sS'mod_api.h'
p513
g63
sS'ma_chn.c'
p514
g94
sS'buffer.h'
p515
g15
sS'mod_did.c'
p516
g192
sS'httpd.h'
p517
g63
sS'mod_filter.c'
p518
g6
sS'buffer.c'
p519
g15
sS'conf.h'
p520
g10
sS'mod_api.c'
p521
g63
sS'httpd.c'
p522
g63
sS'httpclient_common.h'
p523
g12
sS'pagerankadminsdk.c'
p524
g187
sS'mod_docapi_expat_local_temp.c'
p525
g184
sS'memfile.h'
p526
g12
sS'truncation.h'
p527
g45
sS'mod_vrf.h'
p528
g227
sS'memfile.c'
p529
g12
sS'fd_sink.h'
p530
g6
sS'fd_sink.c'
p531
g6
sS'mod_qp_regulation.c'
p532
g85
sS'util_time.h'
p533
g10
sS'cache.c'
p534
g66
sS'mod_documentdb_handler.c'
p535
g39
sS'cache.h'
p536
g66
sS'util_time.c'
p537
g10
sS'Koma.h'
p538
g27
sS'ma_kssm.c'
p539
g94
sS'mod_docattr_type2.h'
p540
g112
sS'mod_anchorclient_client.c'
p541
g34
sS'register.h'
p542
g63
sS'ma_dic.h'
p543
g4
sS'listen.h'
p544
g10
sS'index_word_extractor.h'
p545
g63
sS'ma_gl.c'
p546
g4
sS'mod_did_client.h'
p547
g192
sS'index_word_extractor.c'
p548
g63
sS'listen.c'
p549
g10
sS'memory_source.h'
p550
g6
sS'mod_did_wrap_daemon.c'
p551
g192
sS'mod_did_client.c'
p552
g192
sS'documentdatabase.c'
p553
g488
sS'vbm.c'
p554
g63
sS'mod_anchor_server.c'
p555
g36
sS'didb.h'
p556
g90
sS'shm_mirror_buffer.h'
p557
g6
sS'mod_anchor_server.h'
p558
g36
sS'vbm.h'
p559
g63
sS'documentdatabase.h'
p560
g488
sS'shm_mirror_buffer.c'
p561
g6
sS'mod_docattr_test.c'
p562
g78
sS'testtokenizer.c'
p563
g75
sS'mod_search_handler.c'
p564
g39
sS'getpagerankdbinfo.c'
p565
g187
sS'testwritecdmi.c'
p566
g47
sS'synonym.h'
p567
g32
sS'qpp.c'
p568
g63
sS'mod_anchor_client.c'
p569
g36
sS'QRM_kor.c'
p570
g94
sS'mod_anchor_client.h'
p571
g36
sS'qpp.h'
p572
g63
sS'mod_qp_test.h'
p573
g29
sS'QRM_common.h'
p574
g94
sS'store.c'
p575
g66
sS'mod_docapi_cdmi.c'
p576
g184
sS'lexicon_index.h'
p577
g45
sS'protocol4.c'
p578
g63
sS'pagerankdb.h'
p579
g187
sS'mod_vbm.c'
p580
g218
sS'mod_oldlexicon_suffix.c'
p581
g175
sS'testdoh.c'
p582
g488
sS'httpd_xmlrpc.c'
p583
g63
sS'pagerankdb.c'
p584
g187
sS'httpd_xmlrpc.h'
p585
g63
sS'stack_test.c'
p586
g32
sS'memory_sink.c'
p587
g6
sS'mod_protocol4.h'
p588
S'mod_protocol4'
p589
sS'mod_qpp.h'
p590
g32
sS'mod_protocol4.c'
p591
g589
sS'test_lexicon.c'
p592
g78
sS'sbmgr_args.h'
p593
g203
sS'test_main.c'
p594
g10
sS'test_array.c'
p595
g187
sS'mod_qpp.c'
p596
g32
sS'mod_indexer_handler.c'
p597
g39
sS'Taganal.h'
p598
g27
sS'mod_xqpp.c'
p599
S'mod_xqpp'
p600
sS'protocol4.h'
p601
g63
sS'master_reader.c'
p602
g25
sS'dhtest.c'
p603
g8
sS'Tagger.h'
p604
g27
sS'mod_dummy_handler.c'
p605
g39
sS'mod_register.h'
p606
g47
sS'dbInfo.h'
p607
g227
sS'mod_metadummy.c'
p608
g43
sS'cdm.h'
p609
g63
sS'KomaRsc.h'
p610
g27
sS'pool.c'
p611
g56
sS'mod_docattr_type3.c'
p612
g112
sS'skeleton.h'
p613
g112
sS'docattr.h'
p614
g63
sS'skeleton.c'
p615
g112
sS'http_filter.h'
p616
g10
sS'test_pagerank.c'
p617
g187
sS'docattr.c'
p618
g63
sS'http_reserved_words.h'
p619
g12
sS'mod_docattr_type3.h'
p620
g112
sS'mod_crawler_client.c'
p621
g34
sS'relatedTerm.c'
p622
g32
sS'ma_code.h'
p623
g94
sS'data_reader.c'
p624
g25
sS'isamreader.c'
p625
g187
sS'mod_xqpp.h'
p626
g600
sS'wp_stack.h'
p627
g6
sS'unit_test.c'
p628
g6
sS'mod_method_document_database.c'
p629
g214
sS'mod_bigram.c'
p630
g4
sS'rmas.h'
p631
g63
sS'handler.c'
p632
g66
sS'mod_sbmanager.h'
p633
g203
sS'rmas.c'
p634
g63
sS'cd_filter.h'
p635
g75
sS'html_filter_new.h'
p636
g75
sS'teststree.c'
p637
g8
sS'ma_chn.h'
p638
g94
sS'ma_kor.c'
p639
g4
sS'mod_docattr_supreme_statute.c'
p640
g85
sS'cd_filter.c'
p641
g75
sS'agentdb.h'
p642
g90
sS'http_protocol.h'
p643
g10
sS'array.c'
p644
g36
sS'test_vrf.c'
p645
g78
sS'mod_did_daemon.c'
p646
g192
sS'gen_test_char.c'
p647
g10
sS'array.h'
p648
g36
sS'http_protocol.c'
p649
g10
sS'mod_did_daemon.h'
p650
g192
sS'test_paragraph_index.c'
p651
g78
sS'denormalize_filter.h'
p652
g6
sS'sbhq_anchornode_control.c'
p653
g39
sS'did.c'
p654
g63
sS'http_request.h'
p655
g10
sS'randstr.h'
p656
g187
sS'vrfi.c'
p657
g63
sS'denormalize_filter.c'
p658
g6
sS'vrfi.h'
p659
g63
sS'http_request.c'
p660
g10
sS'connection.c'
p661
g10
sS'header_handle.c'
p662
g25
sS'indexer.h'
p663
g63
sS'sbheadquarter.c'
p664
g63
sS'mod_spool.h'
p665
g143
sS'multiplexor.c'
p666
g6
sS'sbheadquarter.h'
p667
g63
sS'indexer.c'
p668
g63
sS'multiplexor.h'
p669
g6
sS'randstr.c'
p670
g187
sS'mod_metadummy.h'
p671
g43
sS'docapi.h'
p672
g63
sS'shm_filter.c'
p673
g6
sS'utf16_ksc5601_table.h'
p674
g6
sS'docapi.c'
p675
g63
sS'shm_mirror_buffer_filter.h'
p676
g6
sS'allocation.h'
p677
g6
sS'utf16_ksc5601_table.c'
p678
g6
sS'mod_server.c'
p679
g22
sS'shm_filter.h'
p680
g6
sS''
p681
g600
s.'''
class Process:
    processes = {}

    def __init__(self, pid, modules=None):
        self.name = pid
        self.pid = pid
        self.memory = 0.0
        self.pointers = {}

        if modules:
            self.modules = modules
        else:
            self.modules = {}

        Process.processes[self.pid] = self

    def fork(self, child_pid):
        child = Process(child_pid, copy.deepcopy(self.modules))
        child.memory = copy.deepcopy(self.memory)
        child.pointers = copy.deepcopy(self.pointers)

    def alloc(self, modulename, pointer, size):
        size = int(size)
        self.memory = self.memory + size
        self.pointers[pointer] = size

        self.modules[modulename].alloc(pointer, size)

    def free(self, modulename, pointer, size=0):
        size = 0
        try:
            size = self.pointers[pointer]
            del self.pointers[pointer]
        except KeyError:
            print 'freeing unallocated memory', pointer

        self.memory = self.memory - size

        self.modules[modulename].free(pointer)

    def report(self):
        print 
        print 'process[%s]: %s' % (self.pid, self.name)
        print 'total memory:', self.memory / 1024 / 1024

        for module_name in self.modules.keys():
            if self.modules[module_name].memory_usage():
                print '\tmodule[%s] memory usage: %f' \
                        % (module_name, self.modules[module_name].memory_usage())
class Module:
    memory = 0.0
    pointers = {}

    def __init__(self, name):
        self.name        = name
        self.memory      = 0.0

    def alloc(self, pointer, size):
        Module.pointers[pointer] = [size, self]
        self.memory = self.memory + size
        Module.memory = Module.memory + size

    def free(self, pointer, size=0):
        size = 0
        module = None
        try:
            size, module = Module.pointers[pointer]
            del Module.pointers[pointer]
        except KeyError:
            print 'freeing unallocated memory', pointer
            module = self

        module.memory = module.memory - size
        Module.memory = Module.memory - size
        
    def memory_usage(self):
        return self.memory / 1024.0 / 1024.0

def parse(_line):
    line = _line.split('\t')

    pid       = line[0]
    operation = line[1]

    args      = line[2:]

    return pid, operation, args

def main(logfile_name, proc_title_file=None):
    modules = {}
    file_to_mod = {}
    logfile = open(logfile_name)
    
#    f = open('file-to-module.pickle')
#    file_to_mod = pickle.load(f)
    file_to_mod = pickle.loads(pickled)

    for modname in modulenames:
        modules[modname] = Module(modname)

    lines = logfile.readlines()

    pid = lines[0].split('\t')[0]
    process = Process(pid, modules)

    for line in lines: # for each line in logfile
        pid, operation, args = parse(line)

        try:
            method = getattr(Process.processes[pid], operation)
        except KeyError:
            print 'new process emerged without explicit forking log'
            Process(pid, modules)

        if operation == 'fork':
            child_pid = args[0]
            method(child_pid)
        else:

            pointer, size, file, function, linenum, epochtime = args[:6]

            modulename = 'etc'
            try:       
                modulename = file_to_mod[file]
            except KeyError:
                modulename = 'etc'

            module = modules[modulename]
            
            method(modulename, pointer, int(size))

    if proc_title_file:
        f = open(proc_title_file)
        for line in f.readlines():
            pid = line.split()[0]
            try:
                Process.processes[pid].name = ' '.join(line.split()[4:])
            except KeyError:
                pass

    for item in Process.processes.items():
        process  = item[1]
        process.report()


if __name__=='__main__':
    import sys
    logfile = 'log'
    proctitlefile = None
    try:
        logfile = sys.argv[1]
        proctitlefile = sys.argv[2]
    except IndexError:
        pass

    main(logfile, proctitlefile)
