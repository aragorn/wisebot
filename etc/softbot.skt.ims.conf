##############################################################################
# softbot.conf 를 새로 정리한다. -- aragorn, 05/13
# 1. server는 <server.c>를 사용한다.
# 2. client는 <client.c>를 사용한다.
# 3. 그 외 global tag나 softbot_core.c는 모두 없앤다.

<server.c>
### API module
	LoadModule mp_module lib/softbot/mod_mp.so
    LoadModule api_module lib/softbot/mod_api2.so

#####################################################################
### 문서 등록에 반드시 필요한 모듈

### Essencial modules
    LoadModule tcp_module lib/softbot/mod_tcp.so
    LoadModule udp_module lib/softbot/mod_udp.so
    LoadModule vbm_module lib/softbot/mod_vbm.so
    LoadModule xmlparser_module lib/softbot/mod_xmlparser.so

### Register modules
    LoadModule cdm2_module lib/softbot/mod_cdm2.so
    LoadModule did_module lib/softbot/mod_did.so

    LoadModule docapi_module lib/softbot/mod_docapi.so
    LoadModule docattr2_module lib/softbot/mod_docattr2.so
	LoadModule docattr_general2_module lib/softbot/mod_site_general2.so
#####################################################################
### 문서 색인에 반드시 필요한 모듈

    LoadModule lexicon3_module lib/softbot/mod_lexicon3.so

    LoadModule index_each_doc_module lib/softbot/mod_index_each_doc.so 
    LoadModule daemon_indexer2_module lib/softbot/mod_daemon_indexer2.so 
 
    LoadModule tokenizer_module lib/softbot/mod_tokenizer.so 
    LoadModule dummy_ma_module lib/softbot/mod_dummy_ma.so 
    LoadModule kor2chn_translator_module lib/softbot/mod_kor2chn_translator.so 
    LoadModule koma_module lib/softbot/mod_koma.so 
    LoadModule koma_complex_noun_support_module lib/softbot/mod_koma.so 
    LoadModule bigram_module lib/softbot/mod_bigram.so 
    LoadModule bigram_truncation_search_support_module lib/softbot/mod_bigram.so 
    LoadModule dha_module lib/softbot/mod_daum_koma.so 
    LoadModule rmac2_module lib/softbot/mod_rmac2.so 
 
### Indexer modules 
    LoadModule sfs_module lib/softbot/mod_sfs.so
    LoadModule ifs_module lib/softbot/mod_ifs.so

### Httpd modules
    LoadModule httpd_module lib/softbot/mod_httpd.so
    LoadModule http_core_module lib/softbot/mod_httpd.so
    LoadModule core_httpd_module lib/softbot/mod_httpd.so
    LoadModule httpd_connection_module lib/softbot/mod_httpd.so
	# main handler
    LoadModule standard_handler_module lib/softbot/mod_standard_handler.so
	# sub handler
    LoadModule search_sbhandler_module lib/softbot/mod_search_sbhandler.so

#####################################################################
### 분산 색인 서버에 반드시 필요한 모듈

#    LoadModule rmas_module lib/softbot/mod_rmas.so

### Query process modules
    LoadModule morpheme_module lib/softbot/mod_morpheme.so

    LoadModule qpp_module lib/softbot/mod_qpp.so 
    LoadModule qp2_module lib/softbot/mod_qp2.so 
	LoadModule qp_general2_module lib/softbot/mod_site_general2.so
    LoadModule protocol4_module lib/softbot/mod_protocol4.so 
    LoadModule softbot4_module lib/softbot/mod_softbot4.so 
 
    #ProcessTitle softbot

    Listen        2000
    ErrorLog      "logs/error_log"
    RegistryFile  "dat/softbotd.reg"

    # log level: emerg alert crit error warn notice info debug
    LogLevel            info
#    DebugModulePolicy    include
    Name          test.server1

</server.c>

<client.c>
### API module
    LoadModule api_module lib/softbot/mod_api2.so

#####################################################################
### 문서 등록에 반드시 필요한 모듈

### Essencial modules
    LoadModule tcp_module lib/softbot/mod_tcp.so
    LoadModule udp_module lib/softbot/mod_udp.so
    LoadModule vbm_module lib/softbot/mod_vbm.so
    LoadModule xmlparser_module lib/softbot/mod_xmlparser.so

### Register modules
    LoadModule cdm2_module lib/softbot/mod_cdm2.so
    LoadModule did_module lib/softbot/mod_did.so

    LoadModule docapi_module lib/softbot/mod_docapi.so
    LoadModule docattr_module lib/softbot/mod_docattr.so
    LoadModule docattr_general_module lib/softbot/mod_site_general.so
#####################################################################
### 문서 색인에 반드시 필요한 모듈

    LoadModule lexicon3_module lib/softbot/mod_lexicon3.so

    LoadModule tokenizer_module lib/softbot/mod_tokenizer.so 
    LoadModule dummy_ma_module lib/softbot/mod_dummy_ma.so 
    LoadModule kor2chn_translator_module lib/softbot/mod_kor2chn_translator.so 
    LoadModule koma_module lib/softbot/mod_koma.so 
    LoadModule koma_complex_noun_support_module lib/softbot/mod_koma.so 
    LoadModule bigram_module lib/softbot/mod_bigram.so 
    LoadModule bigram_truncation_search_support_module lib/softbot/mod_bigram.so 
 

#####################################################################
### 분산 색인 서버에 반드시 필요한 모듈

    LoadModule morpheme_module lib/softbot/mod_morpheme.so

    LoadModule qpp_module lib/softbot/mod_qpp.so 
    LoadModule protocol4_module lib/softbot/mod_protocol4.so 
    LoadModule softbot4_module lib/softbot/mod_softbot4.so 
 
    Server                  localhost:2000
    LogLevel                debug
    ErrorLog                "logs/client_log"

    RebuildDocAttrField     date
    RebuildDocAttrField     cate

    CdmSet                  1
    DidSet                  1
    WordDbSet               1
</client.c>

FieldRootName           Document


DocAttrField date       String(14)
DocAttrField cate       Enum

#device_group_list	단말속성그룹리스트
Enum 000000001	    1
Enum 000000002	    2
Enum 001000100	    3
Enum 001000200	    4
Enum 002000100	    5
Enum 003000100	    6
Enum 004000100	    7
Enum 004000200	    8
Enum 004000300	    9
Enum 004000400	    10
Enum 005000100	    11
Enum 005000200	    12
Enum 005000300	    13
Enum 005000400	    14
Enum 005000500	    15
Enum 005000600	    16
Enum 005000700	    17
Enum 005000800	    18
Enum 005000810	    19
Enum 005000900	    20
Enum 005001000	    21
Enum 005001100	    22
Enum 006000100	    23
Enum 006000200	    24
Enum 006000300	    25
Enum 006000310	    26
Enum 006000400	    27
Enum 006000500	    28
Enum 006000600	    29
Enum 006000700	    30
Enum 006000800	    31
Enum 006000900	    32
Enum 006001000	    33
Enum 006001100	    34
Enum 007000100	    35
Enum 007000200	    36
Enum 007000300	    37
Enum 007000400	    38
Enum 007000500	    39
Enum 007000510	    40
Enum 008000100	    41
Enum 008000200	    42
Enum 008000300	    43
Enum 008000400	    44
Enum 008000600	    45
Enum 009000080	    46
Enum 009000100	    47
Enum 009000150	    48
Enum 009000200	    49
Enum 009000220	    50
Enum 009000250	    51
Enum 009000300	    52
Enum 009000350	    53
Enum 009000400	    54
Enum 010000100	    55
Enum 010000200	    56
Enum 010000300	    57
Enum 011000100	    58
Enum 011000320	    59
Enum 011000800	    60
Enum 011001300	    61
Enum 011003100	    62
Enum 012000010	    63
Enum 012000020	    64
Enum 012000030	    65
Enum 012000080	    66
Enum 012000120	    67
Enum 012000160	    68
Enum 012000180	    69
Enum 013000100	    70
Enum 013000200	    71
Enum 013000300	    72
Enum 013000400	    73
Enum 013000500	    74
Enum 013000600	    75
Enum 013000700	    76
Enum 013000800	    77
Enum 013000810	    78
Enum 013000850	    79
Enum 013000900	    80
Enum 013001000	    81
Enum 015000001	    82
Enum 015000004	    83
Enum 015000016	    84
Enum 015000040	    85
Enum 015000064	    86
Enum 015000128	    87
Enum 016000100	    88
Enum 016000200	    89
Enum 016000300	    90
Enum 016000400	    91
Enum 016090000	    92
Enum 016090001	    93
Enum 016090002	    94
Enum 016090003	    95
Enum 016090004	    96
Enum 017000100	    97
Enum 017000700	    98
Enum 017000900	    99
Enum 017001000	    100
Enum 017001100	    101
Enum 017001200	    102
Enum 017001300	    103
Enum 017001400	    104
Enum 017001500	    105
Enum 017001600	    106
Enum 018000100	    107
Enum 018000200	    108
Enum 018000500	    109
Enum 018000600	    110
Enum 018000700	    111
Enum 019000100	    112
Enum 019000200	    113
Enum 020000100	    114
Enum 020000200	    115
Enum 020000300	    116
Enum 020000400	    117
Enum 020000500	    118
Enum 021000200	    119
Enum 021000300	    120
Enum 021000400	    121
Enum 021000500	    122
Enum 021000600	    123
Enum 021000800	    124
Enum 022000500	    125
Enum 022000700	    126
Enum 022000900	    127
Enum 022001000	    128
Enum 022001100	    129
Enum 022001200	    130
Enum 022001300	    131
Enum 022001400	    132
Enum 022001500	    133
Enum 022001600	    134
Enum 025000100	    135
Enum 026000100	    136
Enum 026000200	    137
Enum 026000300	    138
Enum 026000400	    139
Enum 028001100	    140
Enum 028001200	    141
Enum 028001300	    142
Enum 028001400	    143
Enum 028001500	    144
Enum 028002200	    145
Enum 028002300	    146
Enum 028002400	    147
Enum 028002500	    148
Enum 028003100	    149
Enum 028004100	    150
Enum 028004200	    151
Enum 028005100	    152
Enum 028005200	    153
Enum 028006100	    154
Enum 028007200	    155
Enum 028007300	    156
Enum 028009000	    157
Enum 028009100	    158
Enum 028009200	    159
Enum 028009300	    160
Enum 028009400	    161
Enum 028090010	    162
Enum 028090020	    163
Enum 028090030	    164
Enum 028090040	    165
Enum 028090050	    166
Enum 028090060	    167
Enum 029000001	    168
Enum 029000004	    169
Enum 029000016	    170
Enum 029000040	    171
Enum 029000064	    172
Enum 029000128	    173
Enum 030000100	    174
Enum 030000200	    175
Enum 031000100	    176
Enum 031000200	    177
Enum 031005100	    178
Enum 031005200	    179
Enum 032000100	    180
Enum 032000200	    181
Enum 032000300	    182
Enum 033000100	    183
Enum 033000200	    184
Enum 034000800	    185

# group
Enum 100003         201   # NATE>My
Enum 100024         202   # NATE>이벤트
Enum 100028         203   # NATE>벨소리/컬러링/뮤직
Enum 100029         204   # NATE>그림/포토/스타/화보
Enum 100030         205   # NATE>게임Zone
Enum 100031         206   # NATE>채팅/메시징/커뮤니티
Enum 100032         207   # NATE>증권/복권/은행/Biz.
Enum 100033         208   # NATE>친구찾기/교통/Drive
Enum 100034         209   # NATE>TV/영화/스포츠/뉴스
Enum 100035         210   # NATE>운세/학습/예매/쇼핑
Enum 100036         211   # NATE>Adult +19
Enum 2000015        212   # JUNE>FreeZone
Enum 2000016        213   # JUNE>뮤직/MelOn
Enum 2000017        214   # JUNE>TV
Enum 2000018        215   # JUNE>영화/Cizle
Enum 2000020        216   # JUNE>게임/애니
Enum 2000022        217   # JUNE>스포츠/연예
Enum 2000024        218   # JUNE>폰꾸미기
Enum 2000025        219   # JUNE>성인



DefaultSearchField 0
DefaultPhraseField 0
VirtualField ALL 0 # 현재 VirtualField의 형태소 분석기 id는 무조건 20번을 쓰도록 hardcoding되어 있음 

#  fieldid  name           index  morp-id(indexer) morp-id(qpp) paragraph-search comment(comment갯수,글자수)   cdm field
Field  0    body            yes       10              11                no            SUM_OR_FIRST             LONG
Field  1    pattern         yes       0               0                 no            #                        SHORT
Field  2    menu_name       yes       21              20                no            RETURN                   SHORT
Field  3    author          yes       21              20                no            RETURN                   SHORT
Field  4    oid             no        0               0                 no            RETURN                   SHORT
Field  5    menu_id         no        0               0                 no            RETURN                   SHORT
Field  6    age_yn          no        0               0                 no            RETURN                   SHORT
Field  7    dam             no        0               0                 no            RETURN                   SHORT
Field  8    dgl             no        0               0                 no            RETURN                   SHORT
Field  9    menu_path       no        0               0                 no            RETURN                   SHORT
Field  10   date            no        0               0                 no            RETURN                   SHORT
Field  11   cate            no        0               0                 no            RETURN                   SHORT
Field  12   tree_id         no        0               0                 no            RETURN                   SHORT
Field  13   system_id       no        0               0                 no            RETURN                   SHORT
Field  14   menu_type       no        0               0                 no            RETURN                   SHORT
Field  15   depth           no        0               0                 no            RETURN                   SHORT
Field  16   ord             no        0               0                 no            RETURN                   SHORT
Field  17   useyn           no        0               0                 no            RETURN                   SHORT

FieldSortingOrder 1 <HIT>:DESC;   #Date:DESC;Title:ASC;  # 관련성
#FieldSortingOrder 4 Date:ASC;<HIT>:DESC;Title:ASC;   # 날짜 ASC

################# 실행 모듈 #################
<mod_protocol4.c>
    CdmSet          1
	DidSet          1
	WordDbSet       1
</mod_protocol4.c>

<mod_softbot4.c>
	# Listen port is only specified in server.c
	Listen          *
	ListenBacklog   2
	Threads         4
	MaxRequests     50000
</mod_softbot4.c>

<mod_daemon_indexer2.c>
	SocketFile         dat/indexer/socket
	LogDir             dat/indexer
    CdmSet             1
	IndexDbSet         1
	WordDbSet          1
</mod_daemon_indexer2.c>

<mod_rmac2.c>
    CdmSet             1
    AddServer          localhost:3120

    Processes          5
</mod_rmac2.c>

<mod_httpd.c>
    Threads 3
    Listen 3000
    ListenBacklog 5
    MaxRequests 100
	WordDbSet          1
	DidSet             1
</mod_httpd.c>
#############################################

################# 연산 모듈 #################
<mod_qpp.c>
	DefaultMorpAnalyzer     20
	QPP_OP_DEFAULT          QPP_OP_AND
	QPP_OP_WITHIN           "/"
	QPP_OP_OR               "+"
	QPP_OP_AND              "&"
	QPP_OP_NOT              "!"
</mod_qpp.c>

<mod_qp2.c>
	DbType             indexdb
    CdmSet             1
	IndexDbSet         1
	WordDbSet          1
	MaxCommentBytes    1024
</mod_qp2.c>

<mod_tcp.c>
	ServerTimeOut	   5
	ClientTimeOut      90
</mod_tcp.c>

<mod_search_sbhandler.c>
    TimeOut            3000000
    KeepAliveTimeOut   60000000
    KeepAliveMax       100
    KeepAlive          0
	NodeId 1
</mod_search_sbhandler.c>

<mod_agent_sbhandler.c>
    TimeOut            3000000
    KeepAliveTimeOut   60000000
    KeepAliveMax       100
    KeepAlive          0
	NodeId 1
</mod_agent_sbhandler.c>
#############################################

################# 저장 모듈 #################
<mod_lexicon3.c>
	WordDbSet          1
	LexiconFile        dat/lexicon/lexicon
</mod_lexicon3.c>

<mod_did.c>
	DidSet             1
	DidFile            dat/did/did.db
</mod_did.c>

<mod_cdm2.c>
    CdmSet   1
    CdmPath  dat/cdm
</mod_cdm2.c>

<mod_cdm.c>
	db_path                 dat/cdm/
	max_db_file_num         100
	max_db_file_size        100000000
	max_doc_num             2000000
</mod_cdm.c>

<mod_ifs.c>
	FileSize           1024
	TempAliveTime      60

	IndexDbSet         1
	IfsPath            dat/indexer
	SegmentSize        256
	BlockSize          128
</mod_ifs.c>

<mod_docattr2.c>
    MaxDocNum               2000000
</mod_docattr2.c>

<mod_vbm.c>
	VBM_BUF_BLOCK_SIZE     1024
	VBM_NUM_BUF_BLOC       5000
</mod_vbm.c>
#############################################

