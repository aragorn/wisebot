##############################################################################
# $Id$
# Configuration for Supreme Court BMT
#
<server.c>
    LoadModule api_module lib/softbot/mod_api.so
    LoadModule mp_module lib/softbot/mod_mp.so
    LoadModule api_module lib/softbot/mod_api2.so

    LoadModule tcp_module lib/softbot/mod_tcp.so
    LoadModule udp_module lib/softbot/mod_udp.so
    LoadModule vbm_module lib/softbot/mod_vbm.so
    LoadModule simple_xmlparser_module lib/softbot/mod_simple_xmlparser.so

    LoadModule cdm3_module lib/softbot/mod_cdm3.so
    LoadModule did_module lib/softbot/mod_did.so

    LoadModule docapi_module lib/softbot/mod_docapi.so
    LoadModule docattr2_module lib/softbot/mod_docattr2.so
    LoadModule docattr_general2_module lib/softbot/mod_site_general2.so

    LoadModule lexicon_module lib/softbot/mod_lexicon.so

    LoadModule index_each_doc_module lib/softbot/mod_index_each_doc.so 
    LoadModule daemon_indexer2_module lib/softbot/mod_daemon_indexer2.so 

    LoadModule tokenizer_module lib/softbot/mod_tokenizer.so 
    LoadModule dummy_ma_module lib/softbot/mod_dummy_ma.so 
    LoadModule kor2chn_translator_module lib/softbot/mod_kor2chn_translator.so 
    LoadModule koma_module lib/softbot/mod_koma.so 
    LoadModule koma_complex_noun_support_module lib/softbot/mod_koma.so 
    LoadModule bigram_module lib/softbot/mod_bigram.so 
    LoadModule bigram_truncation_search_support_module lib/softbot/mod_bigram.so 
    LoadModule rmac2_module lib/softbot/mod_rmac2.so 

	LoadModule sfs_module lib/softbot/mod_sfs.so
	LoadModule ifs_module lib/softbot/mod_ifs.so

    LoadModule httpd_module lib/softbot/mod_httpd.so
    LoadModule http_core_module lib/softbot/mod_httpd.so
    LoadModule core_httpd_module lib/softbot/mod_httpd.so
    LoadModule httpd_connection_module lib/softbot/mod_httpd.so
    LoadModule standard_handler_module lib/softbot/mod_standard_handler.so
    LoadModule search_sbhandler_module lib/softbot/mod_search_sbhandler.so


    LoadModule morpheme_module lib/softbot/mod_morpheme.so

    LoadModule qpp_module lib/softbot/mod_qpp.so 
    LoadModule qp2_module lib/softbot/mod_qp2.so 
    LoadModule qp_general2_module lib/softbot/mod_site_general2.so
	# protocol4_module이 httpd_module 보다 앞에 loading되면, mod_httpd가 signal 11로 종료
    LoadModule protocol4_module lib/softbot/mod_protocol4.so
 
    #ProcessTitle softbot

    Listen        8100
    ErrorLog      "logs/error_log"
	RegistryFile  "dat/softbotd.reg"

    # log level: emerg alert crit error warn notice info debug
    LogLevel            info
#    DebugModulePolicy    include
	Name          bmt

</server.c>

<client.c>
    LoadModule api_module lib/softbot/mod_api2.so

    LoadModule tcp_module lib/softbot/mod_tcp.so
    LoadModule udp_module lib/softbot/mod_udp.so
    LoadModule vbm_module lib/softbot/mod_vbm.so
    LoadModule simple_xmlparser_module lib/softbot/mod_simple_xmlparser.so

    LoadModule tokenizer_module lib/softbot/mod_tokenizer.so 
    LoadModule dummy_ma_module lib/softbot/mod_dummy_ma.so 
    LoadModule kor2chn_translator_module lib/softbot/mod_kor2chn_translator.so 
    LoadModule koma_module lib/softbot/mod_koma.so 
    LoadModule koma_complex_noun_support_module lib/softbot/mod_koma.so 
    LoadModule bigram_module lib/softbot/mod_bigram.so 
    LoadModule bigram_truncation_search_support_module lib/softbot/mod_bigram.so 
 
    LoadModule morpheme_module lib/softbot/mod_morpheme.so

    LoadModule qpp_module lib/softbot/mod_qpp.so 

	Server                  localhost:8100
	LogLevel                debug
	ErrorLog                "logs/client_log"

</client.c>

FieldRootName           Document

DocAttrField PronounceDate Integer #선고일자
DocAttrField CaseNum1      Integer #사건번호
DocAttrField CaseNum2      String(8)
DocAttrField CaseNum3      Integer

DefaultSearchField 0 2 3 5 7 9 
DefaultPhraseField 4 6 8 
VirtualField ALL 4 6 8 # 현재 VirtualField의 형태소 분석기 id는 무조건 20번을 쓰도록 hardcoding되어 있음 
 
#  fieldid  name           index  indexer    paragraph-search
#                                       qpp        commmnt        cdm field
Field  0    Abstract        yes    11   11   no    RETURN         LONG
Field  1    JudgementNote   yes    11   11   no    SUM_OR_FIRST   LONG
Field  2    Body            yes    11   11   no    SUM_OR_FIRST   LONG
Field  3    CaseNum         yes    0    0    no    RETURN         SHORT
Field  4    pattern         yes    0    0    no    RETURN         SHORT

Field  5    Court           no     0    0    no    RETURN         SHORT
Field  6    PronounceDate   no     0    0    no    RETURN         SHORT
Field  7    CaseName        no     0    0    no    RETURN         SHORT
Field  8    DecisionType    no     0    0    no    RETURN         SHORT
Field  9    Pronounce       no     0    0    no    RETURN         SHORT
Field  10   OID             no     0    0    no    RETURN         SHORT
Field  11   CaseNum1        no     0    0    no    RETURN         SHORT
Field  12   CaseNum2        no     0    0    no    RETURN         SHORT
Field  13   CaseNum3        no     0    0    no    RETURN         SHORT


################# 실행 모듈 #################
<mod_daemon_indexer2.c>
    SocketFile         dat/indexer/socket
    LogDir             dat/indexer
    CdmSet             1
    IndexDbSet         1
    WordDbSet          1
</mod_daemon_indexer2.c>

<mod_rmac2.c>
    CdmSet             1

    AddServer          localhost:3120
    Processes          2
</mod_rmac2.c>

<mod_httpd.c>
    Threads 2
    Listen 8600
    ListenBacklog 2
    MaxRequests 1000
    ApacheStyleConf "etc/mod_httpd.conf"
</mod_httpd.c>
#############################################

################# 연산 모듈 #################
<mod_qpp.c>
    DefaultMorpAnalyzer     21
    QPP_OP_DEFAULT          QPP_OP_AND
    QPP_OP_WITHIN           "/"
    QPP_OP_OR               "+"
    QPP_OP_AND              "&"
    QPP_OP_NOT              "!"
</mod_qpp.c>

<mod_qp2.c>
    DbType             indexdb
    CdmSet             1
    IndexDbSet         1
    WordDbSet          1
</mod_qp2.c>

<mod_tcp.c>
    ServerTimeOut      5
    ClientTimeOut      90
</mod_tcp.c>

<mod_standard_handler.c>
    DidSet             1
    CdmSet             1
    IndexDbSet         1
    WordDbSet          1
</mod_standard_handler.c>

<mod_search_sbhandler.c>
    TimeOut            3000000
    KeepAliveTimeOut   60000000
    KeepAliveMax       100
    KeepAlive          1
    NodeId             1
</mod_search_sbhandler.c>
#############################################

################# 저장 모듈 #################
<mod_lexicon.c>
    WordDbSet          1
    LexiconFile        dat/lexicon/lexicon
</mod_lexicon.c>

<mod_did.c>
    DidSet             1
    DidFile            dat/did/did.db
</mod_did.c>

<mod_cdm2.c>
    CdmSet             1
    CdmPath            dat/cdm
</mod_cdm2.c>

<mod_cdm3.c>
    CdmSet             1
    CdmPath            dat/cdm
	IndexDbSet         2
</mod_cdm3.c>

<mod_docattr2.c>
    MaxDocNum               5000000
</mod_docattr2.c>

<mod_ifs.c>
    FileSize           1024
    TempAliveTime      60

    IndexDbSet         1
    IfsPath            dat/indexer
    SegmentSize        256
    BlockSize          128

	IndexDbSet         2
	IfsPath            dat/cdm
	SegmentSize        64
	BlockSize          64
</mod_ifs.c>

<mod_vbm.c>
    VBM_BUF_BLOCK_SIZE     1024
    VBM_NUM_BUF_BLOC       5000
</mod_vbm.c>
#############################################

